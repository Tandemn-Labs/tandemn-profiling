
name: roofline-tp4-pp1
resources:
  cloud: aws
  accelerators: L40S:4
  use_spot: false
  disk_size: 500GB
  memory: "64GB+"
num_nodes: 1
workdir: .
setup: | 
  set -euxo pipefail
  python3 -m pip install -U pip
  python3 -m pip install -U uv

  uv venv --python 3.12 --seed
  source .venv/bin/activate

  # Install vLLM and LMCache
  uv pip install "vllm==0.11.0" "datasets" "lmcache==0.3.6"
  mkdir -p /tmp/lmcache_disk

run: |
  set -euxo pipefail
  source .venv/bin/activate 
  python roofline_benchmarks/benchmark_roofline-tp4-pp1.py
    

  echo "Cluster ready for benchmarking"
