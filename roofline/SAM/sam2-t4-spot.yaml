name: sam2-test

resources:
  accelerators: T4:1
  use_spot: true  # Use on-demand for testing (more reliable)
  disk_size: 100
  ports: 8080
  # image_id: docker:choprahetarth/sam2-server:latest

workdir: .

setup: |
  echo "Using pre-built Docker image choprahetarth/sam2-server"
  echo "No installation required - cold start will be FAST!"
  docker pull choprahetarth/sam2-server:latest


run: |
  echo "Docker container starting SAM2 server..."
  docker run --rm \
    --gpus all \
    -p 8080:8080 \
    --name sam2-server \
    choprahetarth/sam2-server:latest